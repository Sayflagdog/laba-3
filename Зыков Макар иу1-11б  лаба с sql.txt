5 –≤–∞—Ä–∏–∞–Ω—Ç. –ó—ã–∫–æ–≤ –ú–∞–∫–∞—Ä –ò–£1-11–ë
–°–æ–∑–¥–∞–µ–º –ë–î (—è –≤—Å–µ —Ä–∞–∑–æ–±—å—é –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º, —á—Ç–æ–±—ã –±—ã–ª–æ –ø—Ä–æ—â–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ª–æ–≥–∏–∫—É) 
1. 
CREATE DATABASE task_management;
(–ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ë–î task_management)
\c task_management 

2.1 - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∑–∞–¥–∞—á

CREATE TYPE priority_enum AS ENUM ('–í—ã—Å–æ–∫–∏–π', '–°—Ä–µ–¥–Ω–∏–π', '–ù–∏–∑–∫–∏–π');
CREATE TYPE status_enum AS ENUM ('–í—ã–ø–æ–ª–Ω–µ–Ω–∞', '–í –ø—Ä–æ—Ü–µ—Å—Å–µ', '–û—Ç–ª–æ–∂–µ–Ω–∞');

CREATE TABLE tasks (
    id SERIAL PRIMARY KEY,                  
    title VARCHAR(255) NOT NULL,            
    priority priority_enum NOT NULL,        
    due_date DATE NOT NULL,                  
    status status_enum NOT NULL              
);

2.2 –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

CREATE TABLE users (
    id SERIAL PRIMARY KEY,                 
    name VARCHAR(255) NOT NULL               
);

2.3 –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å–∞–º–∏—Ö –∑–∞–¥–∞—á (–∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

CREATE TABLE task_assignments (
    assignment_id SERIAL PRIMARY KEY,       
    task_id INT NOT NULL,                 
    user_id INT NOT NULL,                 
    FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE,  
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);


3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö —Ç–∞–±–ª–∏—Ü –¥–∞–Ω–Ω—ã–º–∏

3.1 - –ò–º–µ–Ω–∞
INSERT INTO users (name) VALUES
('–ü–∞–≤–µ–ª –ê–ª–µ–∫—Å–µ–µ–≤–∏—á'),
('–ó—ã–∫–æ–≤ –ú–∞–∫–∞—Ä'),
('–í–ª–∞–¥–∏–º–∏—Ä –ü—É—Ç–∏–Ω');

3.2 - —Ç–∞—Å–∫–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 

INSERT INTO tasks (title, priority, due_date, status) VALUES
('–ó–∞–¥–∞—á–∞ 1', '–í—ã—Å–æ–∫–∏–π', '2024-12-01', '–í –ø—Ä–æ—Ü–µ—Å—Å–µ'),
('–ó–∞–¥–∞—á–∞ 2', '–°—Ä–µ–¥–Ω–∏–π', '2024-12-10', '–û—Ç–ª–æ–∂–µ–Ω–∞'),
('–ó–∞–¥–∞—á–∞ 3', '–ù–∏–∑–∫–∏–π', '2024-11-30', '–í—ã–ø–æ–ª–Ω–µ–Ω–∞'),
('–ó–∞–¥–∞—á–∞ 4', '–í—ã—Å–æ–∫–∏–π', '2024-12-05', '–í –ø—Ä–æ—Ü–µ—Å—Å–µ');

3.3 –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–¥–∞—á–∞–º–∏ (task_assignments)

INSERT INTO task_assignments (task_id, user_id) VALUES
(1, 1),  -> –ó–∞–¥–∞—á–∞ 1 –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ü–∞–≤–ª—É –ê–ª–µ–∫—Å–µ–µ–≤–∏—á—É
(2, 2),  -> –ó–∞–¥–∞—á–∞ 2 –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –º–Ω–µ (–ó—ã–∫–æ–≤ –ú–∞–∫–∞—Ä)
(3, 3),  -> –ó–∞–¥–∞—á–∞ 3 –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –í–ª–∞–¥–∏–º–∏—Ä—É –ü—É—Ç–∏–Ω—É
(4, 1);  -> –ó–∞–¥–∞—á–∞ 4 –±—É–¥–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Å–Ω–æ–≤–∞ –ü–∞–≤–ª—É –ê–ª–µ–∫—Å–µ–µ–≤–∏—á—É
 
4. –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å—ã 

4.1 –ø–æ–ª—É—á–∞–µ–º –∑–∞–ø—Ä–æ—Å

SELECT title, priority, due_date
FROM tasks;


4.2 –ø–æ–ª—É—á–∞–µ–º –∑–∞–ø—Ä–æ—Å –∏–º–µ–Ω–Ω–æ –¥–ª—è —é–∑–µ—Ä–∞ –ø–æ–¥ –∏–Ω–¥–µ–∫—Å–æ–º 1 (–ü–∞–≤–µ–ª –ê–ª–µ–∫—Å–µ–µ–≤–∏—á –∞ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ) 

SELECT t.title, t.priority, t.due_date, t.status
FROM tasks t
JOIN task_assignments ta ON t.id = ta.task_id
WHERE ta.user_id = 1;

4.3 –Ω–∞—Ö–æ–¥–∏–º —Å–Ω–æ–≤–∞ –∑–∞–¥–∞—á—É, –Ω–æ —É–∂–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –∫–æ—Ç–æ—Ä—ã–π –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π

SELECT title, due_date
FROM tasks
WHERE priority = '–í—ã—Å–æ–∫–∏–π'
  AND due_date BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL '7 days';

5. –≤ —Ñ–∏–Ω–∞–ª–µ –ø–æ–ª—É—á–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –≤ –∫–∞–∂–¥–æ–º —Å—Ç–∞—Ç—É—Å–µ 

SELECT status, COUNT(*) AS task_count
FROM tasks
GROUP BY status;

–ö–æ–Ω–µ—Ü üòé




